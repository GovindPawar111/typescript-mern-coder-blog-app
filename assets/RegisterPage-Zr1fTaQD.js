import{z as f,A as y,u as b,a as j,j as e,B as N,i as w,T as r,d as v}from"./index-URDWOw5y.js";import{u as S,t as A}from"./zod-wQOMx4mP.js";import{L as E,u as k}from"./useAnonymousLogin-nQENlxbI.js";const F=E.extend({username:f.string().min(1,"Username is required").min(3,"Username must be at least 3 characters long")}),L=()=>{const{createNotification:a}=v(),{mutate:i}=y(),{setUser:m}=b(),l=j(),{register:o,handleSubmit:c,formState:{errors:t},setError:u}=S({defaultValues:{},resolver:A(F)}),d=async({username:s,email:g,password:h})=>{i({username:s,email:g,password:h},{onSuccess(){a("An Email has been sent to your registered email, please verify",r.Success),l("/verify-email")},onError:p=>{var n;u("root",{message:((n=p.response)==null?void 0:n.data.message)||"Something went wrong, please try after sometime."}),a("Registration Failed",r.Error)}})},x=k(s=>{m({id:s.id,username:s.username,email:s.email,createdAt:s.createdAt,updatedAt:s.updatedAt,isAnonymous:!0}),a("Login Successful as Guest",r.Success),l("/"),sessionStorage.setItem("user",JSON.stringify({id:s.id,name:s.username}))},()=>{a("Failed to login as Guest",r.Error)});return e.jsx("section",{className:"w-full flex justify-center items-center h-[70vh] bg-white",children:e.jsxs("div",{className:"flex  flex-col justify-center items-center  w-[80%] sm:w-[500px]",children:[e.jsx("h1",{className:"text-xl font-bold text-left",children:"Create an account"}),e.jsxs("form",{noValidate:!0,onSubmit:c(d),className:"flex flex-col w-full",children:[e.jsx("input",{type:"text",placeholder:"Enter your username",className:"w-full px-4 py-2 border-2 border-black outline-0 mt-4",...o("username")}),t.username&&e.jsx("label",{htmlFor:"username",className:"text-red-500 text-xs",children:t.username.message}),e.jsx("input",{type:"email",placeholder:"Enter your email",className:"w-full px-4 py-2 border-2 border-black outline-0 mt-4",...o("email")}),t.email&&e.jsx("label",{htmlFor:"email",className:"text-red-500 text-xs",children:t.email.message}),e.jsx("input",{type:"password",placeholder:"Enter your password",className:"w-full px-4 py-2 border-2 border-black outline-0 mt-4",...o("password")}),t.password&&e.jsx("label",{htmlFor:"password",className:"text-red-500 text-xs",children:t.password.message}),e.jsx(N,{label:"Register",type:"submit",className:"w-full py-3 text-lg font-bold rounded-lg hover:bg-gray-500 hover:text-black mt-4"})]}),t.root&&e.jsx("p",{className:"text-red-600 text-xs mt-2",children:t.root.message}),e.jsxs("div",{className:"flex justify-center items-center space-x-2 mt-2",children:[e.jsx("p",{children:"Already have an account?"}),e.jsx("p",{className:"text-gray-500 hover:text-black hover:underline",children:e.jsx(w,{to:"/login",children:"Log in"})}),e.jsx("p",{children:"or"}),e.jsx("p",{className:"text-gray-500 hover:text-black hover:underline",onClick:x,children:"Login as Guest"})]})]})})},G=L;export{G as Component,L as default};
