import{a as h,u as p,D as y,j as e,B as j,i as b,T as o,d as N}from"./index-URDWOw5y.js";import{u as w,t as S}from"./zod-wQOMx4mP.js";import{u as L,L as v}from"./useAnonymousLogin-nQENlxbI.js";const A=()=>{const i=h(),{setUser:l}=p(),{createNotification:r}=N(),{register:n,handleSubmit:m,formState:{errors:a},setError:u}=w({defaultValues:{},resolver:S(v)}),{mutate:d}=y(),x=async({email:t,password:f})=>{d({email:t,password:f},{onSuccess(s){l({id:s.id,username:s.username,email:s.email,createdAt:s.createdAt,updatedAt:s.updatedAt}),r("Login Successful",o.Success),i("/"),sessionStorage.setItem("user",JSON.stringify({id:s.id,name:s.username}))},onError:s=>{var c;u("root",{message:((c=s.response)==null?void 0:c.data.message)||"Something went wrong, please try after sometime."}),r("Login Failed",o.Error)}})},g=L(t=>{l({id:t.id,username:t.username,email:t.email,createdAt:t.createdAt,updatedAt:t.updatedAt,isAnonymous:!0}),r("Login Successful as Guest",o.Success),i("/"),sessionStorage.setItem("user",JSON.stringify({id:t.id,name:t.username}))},()=>{r("Failed to login as Guest",o.Error)});return e.jsx("section",{className:"w-full flex justify-center items-center h-[70vh] bg-white",children:e.jsxs("div",{className:"flex flex-col justify-center items-center w-[80%] sm:w-[500px]",children:[e.jsx("h1",{className:"text-xl font-bold text-left",children:"Log in to your account"}),e.jsxs("form",{noValidate:!0,onSubmit:m(x),className:"flex flex-col w-full mt-4",children:[e.jsx("input",{type:"email",...n("email"),placeholder:"Enter your email",className:"w-full px-4 py-2 border-2 border-black outline-0"}),a.email&&e.jsx("label",{htmlFor:"email",className:"text-red-500 text-xs",children:a.email.message}),e.jsx("input",{type:"password",...n("password"),placeholder:"Enter your password",className:"w-full px-4 py-2 border-2 border-black outline-0 mt-4"}),a.password&&e.jsx("label",{htmlFor:"password",className:"text-red-500 text-xs",children:a.password.message}),e.jsx(j,{type:"submit",label:"Log in",className:"w-full py-3 text-lg font-bold rounded-lg hover:bg-gray-500 hover:text-black mt-4"})]}),a.root&&e.jsx("p",{className:"text-red-600 text-xs mt-2",children:a.root.message}),e.jsxs("div",{className:"flex justify-center items-center space-x-2 mt-1",children:[e.jsx("p",{children:"New here?"}),e.jsx("p",{className:"text-gray-500 hover:text-black hover:underline",children:e.jsx(b,{to:"/register",children:"Register"})}),e.jsx("p",{children:"or"}),e.jsx("p",{className:"text-gray-500 hover:text-black hover:underline",onClick:g,children:"Login as Guest"})]})]})})},C=A;export{C as Component,A as default};
